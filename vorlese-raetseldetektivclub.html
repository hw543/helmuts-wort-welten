<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Der R√§tseldetektivclub ‚Äì Vorleseabenteuer</title>
    <style>
        /* Grundlegendes Seitenlayout */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Georgia', serif;
            line-height: 1.8;
            color: #2c1810;
            background: linear-gradient(135deg, #FFEFEF 0%, #FFD4C2 50%, #FFCFCF 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #FFF8F0;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: visible;
        }
        .header {
            background: linear-gradient(135deg, #7EC850, #3FA34D);
            color: #FFF8F0;
            padding: 30px;
            text-align: center;
        }
        .book-cover {
            text-align: center;
            margin-bottom: 20px;
        }
        .book-cover img {
            max-width: 220px;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            border: 3px solid #7EC850;
        }
        .header h1 {
            font-size: 2.4em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            font-style: italic;
        }
        .controls {
            background: #FFF8F8;
            padding: 20px;
            border-bottom: 3px solid #7EC850;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .language-navigation {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        .btn-lang {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #7EC850, #3FA34D);
            color: white;
        }
        .btn-lang.active {
            border: 2px solid #FFD700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        .btn-lang:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }
        .control-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
            color: white;
        }
        .btn-play {
            background: linear-gradient(135deg, #EA4335, #D93025);
        }
        .btn-continue {
            background: linear-gradient(135deg, #34A853, #0F9D58);
        }
        .btn-stop {
            background: linear-gradient(135deg, #F9AB00, #FBBC05);
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .content {
            padding: 30px;
            font-size: 1.1em;
            line-height: 1.8;
        }
        .book-title {
            color: #5B8C5A;
            font-size: 2em;
            margin-bottom: 10px;
            text-align: center;
            border-bottom: 2px solid #7EC850;
            padding-bottom: 10px;
        }
        .chapter-title {
            color: #3F6B3F;
            font-size: 1.5em;
            margin: 25px 0 15px;
            text-align: center;
            font-style: italic;
        }
        .text-content {
            text-align: justify;
            margin-bottom: 30px;
        }
        .word {
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 1px 2px;
            border-radius: 3px;
        }
        .word:hover {
            background-color: #E7F9E7;
        }
        .word-highlight {
            background-color: #4169E1;
            color: white;
            padding: 2px 4px;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(65, 105, 225, 0.3);
        }
        .hidden {
            display: none;
        }
        @media (max-width: 600px) {
            .control-buttons {
                gap: 10px;
            }
            .btn {
                min-width: 100px;
                font-size: 0.9em;
                padding: 10px 16px;
            }
            .content {
                padding: 20px;
                font-size: 1em;
            }
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="book-cover">
                <img src="raetseldetektivclub.jpg" alt="Der R√§tseldetektivclub ‚Äì Cover" />
            </div>
            <h1>Der R√§tseldetektivclub</h1>
            <p>Vorlesen und Mitlesen leicht gemacht ‚Äì tauchen Sie ein in ein spannendes R√§tselabenteuer</p>
        </div>
        <div class="controls">
            <div class="language-navigation">
                <button class="btn-lang active" onclick="switchLanguage('de', event)">üá©üá™ Deutsch</button>
                <button class="btn-lang" onclick="switchLanguage('en', event)">üá¨üáß English</button>
            </div>
            <div class="control-buttons">
                <button class="btn btn-play" id="btn-play" onclick="startReading()">üî¥ Vorlesen</button>
                <button class="btn btn-continue" id="btn-continue" onclick="continueReading()">‚ñ∂Ô∏è Weiterlesen</button>
                <button class="btn btn-stop" id="btn-stop" onclick="stopReading()">‚èπÔ∏è Stop</button>
            </div>
        </div>
        <div class="content">
            <div class="book-title">Der R√§tseldetektivclub</div>
            <div class="chapter-title">Kapitel 1: Ein neuer Fall beginnt</div>
            <!-- Deutsche Fassung -->
            <div id="de-content" class="language-content">
                <div class="text-content" id="de-textContent">
                    <p>
                        Die Nachmittagssonne schien durch die hohen Fenster der Schulbibliothek, und Max bl√§tterte gelangweilt in einem alten Buch. Sein Blick wanderte √ºber die staubigen Regale, als er pl√∂tzlich einen alten, vergilbten Umschlag bemerkte, der aus einem zerlesenen Band hervorstand. Neugierig zog er den Umschlag heraus und √∂ffnete ihn vorsichtig. Innen befand sich eine Notiz in geschwungener Handschrift: ‚ÄûSuche dort, wo die Schatten Geschichten erz√§hlen, und finde den ersten Schl√ºssel." Max' Herz schlug schneller. Das klang nach einem R√§tsel, das nur darauf wartete, gel√∂st zu werden. Ohne zu z√∂gern, steckte er den Umschlag ein und eilte aus der Bibliothek. Der Club versammelte sich in ihrem geheimen Hauptquartier: dem alten Baumhaus im Garten von Jonas. Die W√§nde des Baumhauses waren mit Landkarten, Zeitungsausschnitten und Fotos dekoriert, die sie von ihren bisherigen Abenteuern gesammelt hatten. ‚ÄûWas hast du da, Max?", fragte Emma neugierig, als er den Umschlag auf den Tisch legte. ‚ÄûDas ist ein R√§tsel!" Max erkl√§rte aufgeregt, was er in der Bibliothek gefunden hatte.
                    </p>
                    <p>
                        Jonas lehnte sich nach vorn, die Stirn gerunzelt. ‚ÄûWo die Schatten Geschichten erz√§hlen... Das klingt wie das alte Theater in der Stadt." ‚ÄûOder vielleicht das Museum?", warf Lena ein. ‚ÄûDort gibt es doch diese Abteilung mit alten M√§rchenfiguren." Die Gruppe diskutierte lebhaft, bis sie sich schlie√ülich darauf einigte, zuerst das Theater zu untersuchen. Am Abend schlichen sich die vier Freunde in das alte, l√§ngst geschlossene Theater. Der gro√üe Saal war dunkel, und Staub tanzte in den Lichtstrahlen ihrer Taschenlampen. √úberall standen alte Kulissen und Requisiten. ‚ÄûHier erz√§hlen die Schatten wirklich Geschichten", murmelte Lena und zeigte auf die seltsamen Schatten, die die Kulissen auf die W√§nde warfen. Emma entdeckte schlie√ülich eine unscheinbare Holztruhe, die halb unter einer B√ºhne verborgen war. Sie kniete sich hin und zog sie hervor. ‚ÄûHier! Das k√∂nnte der Schl√ºssel sein!" Mit klopfendem Herzen √∂ffneten sie die Truhe und fanden darin eine kleine Karte und eine weitere Nachricht: ‚ÄûDer Weg beginnt mit einem Schritt ins Ungewisse. Folge den Sternen, und du wirst den zweiten Hinweis finden."
                    </p>
                    <p>
                        Jonas hielt die Karte hoch. ‚ÄûDas ist ein Plan von unserer Stadt... und diese Markierung zeigt den alten Uhrenturm. Das ist unser n√§chster Halt." Als die Kinder das Theater verlie√üen, bemerkten sie, dass sie nicht allein waren. Ein dunkler Schatten bewegte sich hinter einem der Fenster, und drau√üen auf der Stra√üe war das leise Summen eines Motors zu h√∂ren. ‚ÄûJemand beobachtet uns", fl√ºsterte Emma, w√§hrend sie sich an Jonas klammerte. ‚ÄûWeg hier!", rief Max und rannte los, die anderen dicht hinter ihm. In letzter Sekunde schl√ºpften sie in eine schmale Gasse und versteckten sich hinter einem Stapel alter Kisten. Keuchend lauschten sie, wie schwere Schritte n√§herkamen und dann wieder verschwanden. ‚ÄûDas war knapp", sagte Lena atemlos. ‚ÄûAber jetzt wissen wir, dass wir nicht die Einzigen sind, die hinter diesem R√§tsel her sind." Max nickte. ‚ÄûDas macht es nur noch spannender. Morgen gehen wir zum Uhrenturm." Die Freunde trennten sich schlie√ülich, jeder in Gedanken versunken. Max wusste, dass dies kein gew√∂hnliches Abenteuer werden w√ºrde ‚Äì und der wahre Schl√ºssel im Verborgenen lag.
                    </p>
                </div>
            </div>
            <!-- Englische Fassung -->
            <div id="en-content" class="language-content hidden">
                <div class="text-content" id="en-textContent">
                    <p>
                        The afternoon sun shone through the tall windows of the school library, and Max was leafing through an old book with boredom. His gaze wandered over the dusty shelves when he suddenly noticed an old, yellowed envelope protruding from a well-worn volume. Curiously, he pulled out the envelope and opened it carefully. Inside was a note in flowing handwriting: "Search where the shadows tell stories, and find the first key." Max's heart beat faster. This sounded like a puzzle just waiting to be solved. Without hesitation, he pocketed the envelope and hurried out of the library. The club gathered in their secret headquarters: the old tree house in Jonas's garden. The walls of the tree house were decorated with maps, newspaper clippings and photos they had collected from their previous adventures. "What have you got there, Max?" Emma asked curiously as he placed the envelope on the table. "It's a puzzle!" Max excitedly explained what he had found in the library.
                    </p>
                    <p>
                        Jonas leaned forward, frowning. "Where the shadows tell stories... That sounds like the old theatre in town." "Or maybe the museum?" Lena suggested. "There's that section with old fairy tale figures." The group discussed animatedly until they finally agreed to investigate the theatre first. In the evening, the four friends snuck into the old, long-closed theatre. The large hall was dark, and dust danced in the light beams of their torches. Old sets and props stood everywhere. "Here the shadows really do tell stories," Lena murmured, pointing to the strange shadows that the sets cast on the walls. Emma finally discovered an inconspicuous wooden chest that was half hidden under a stage. She knelt down and pulled it out. "Here! This could be the key!" With beating hearts they opened the chest and found a small map and another message: "The path begins with a step into the unknown. Follow the stars and you will find the second clue."
                    </p>
                    <p>
                        Jonas held up the map. "This is a plan of our town... and this marking shows the old clock tower. That's our next stop." As the children left the theatre, they noticed they were not alone. A dark shadow moved behind one of the windows, and outside on the street the quiet hum of an engine could be heard. "Someone is watching us," Emma whispered as she clung to Jonas. "Get out of here!" Max shouted and ran off, the others close behind him. At the last second they slipped into a narrow alley and hid behind a pile of old boxes. Panting, they listened as heavy footsteps approached and then disappeared again. "That was close," Lena said breathlessly. "But now we know we're not the only ones after this puzzle." Max nodded. "That just makes it more exciting. Tomorrow we'll go to the clock tower." The friends finally parted, each lost in thought. Max knew this would be no ordinary adventure ‚Äì and the real key lay hidden.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <script>
        let currentSpeech = null;
        let currentLanguage = 'de';
        let currentWordIndex = 0;
        const allWords = { de: [], en: [] };
        let lastHighlightedWord = null;

        function initializeWords() {
            ['de', 'en'].forEach(lang => {
                allWords[lang] = [];
                const paragraphs = document.querySelectorAll(`#${lang}-textContent p`);
                let wordCounter = 0;
                paragraphs.forEach(paragraph => {
                    const text = paragraph.textContent.trim();
                    const splitWords = text.split(/\s+/).filter(w => w.length > 0);
                    let html = '';
                    splitWords.forEach(word => {
                        html += `<span class="word" data-index="${wordCounter}" onclick="startFromWord(${wordCounter})">${word}</span> `;
                        allWords[lang].push(word);
                        wordCounter++;
                    });
                    paragraph.innerHTML = html.trim();
                });
            });
        }

        function switchLanguage(lang, event) {
            stopReading();
            currentLanguage = lang;
            currentWordIndex = 0;
            document.querySelectorAll('.language-content').forEach(elem => elem.classList.add('hidden'));
            document.getElementById(`${lang}-content`).classList.remove('hidden');
            const labels = {
                de: { play: 'Vorlesen', cont: 'Weiterlesen', stop: 'Stop' },
                en: { play: 'Read', cont: 'Continue', stop: 'Stop' }
            };
            document.getElementById('btn-play').innerHTML = `üî¥ ${labels[lang].play}`;
            document.getElementById('btn-continue').innerHTML = `‚ñ∂Ô∏è ${labels[lang].cont}`;
            document.getElementById('btn-stop').innerHTML = `‚èπÔ∏è ${labels[lang].stop}`;
            document.querySelectorAll('.btn-lang').forEach(btn => btn.classList.remove('active'));
            if (event && event.target) {
                event.target.classList.add('active');
            }
            const topElem = document.querySelector(`#${lang}-content`);
            if (topElem) {
                topElem.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function highlightWord(index) {
            if (lastHighlightedWord) {
                lastHighlightedWord.classList.remove('word-highlight');
            }
            const element = document.querySelector(`#${currentLanguage}-content .word[data-index="${index}"]`);
            if (element) {
                element.classList.add('word-highlight');
                lastHighlightedWord = element;
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        function startReading() {
            currentWordIndex = 0;
            if (currentSpeech) {
                speechSynthesis.cancel();
            }
            continueReading();
        }

        function continueReading() {
            if (currentSpeech) {
                speechSynthesis.cancel();
            }
            const words = allWords[currentLanguage];
            if (words && words.length > currentWordIndex) {
                const remainingText = words.slice(currentWordIndex).join(' ');
                currentSpeech = new SpeechSynthesisUtterance(remainingText);
                currentSpeech.rate = 1.0;
                currentSpeech.lang = currentLanguage === 'de' ? 'de-DE' : 'en-US';
                let localIndex = currentWordIndex;
                currentSpeech.onboundary = function(event) {
                    if (event.name === 'word') {
                        highlightWord(localIndex);
                        localIndex++;
                        currentWordIndex = localIndex;
                    }
                };
                currentSpeech.onend = function() {
                    // am Ende nichts Besonderes
                };
                speechSynthesis.speak(currentSpeech);
            }
        }

        function startFromWord(index) {
            currentWordIndex = index;
            if (currentSpeech) {
                speechSynthesis.cancel();
            }
            continueReading();
        }

        function stopReading() {
            if (currentSpeech) {
                speechSynthesis.cancel();
                currentSpeech = null;
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            initializeWords();
            switchLanguage('de');
        });
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Der verborgene Wald ‚Äì Vorleseabenteuer</title>
    <style>
        /* Grundlegendes Seitenlayout */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Georgia', serif;
            line-height: 1.8;
            color: #2c1810;
            background: linear-gradient(135deg, #FFEFEF 0%, #FFD4C2 50%, #FFCFCF 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #FFF8F0;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: visible;
        }
        .header {
            background: linear-gradient(135deg, #7EC850, #3FA34D);
            color: #FFF8F0;
            padding: 30px;
            text-align: center;
        }
        .book-cover {
            text-align: center;
            margin-bottom: 20px;
        }
        .book-cover img {
            max-width: 220px;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            border: 3px solid #7EC850;
        }
        .header h1 {
            font-size: 2.4em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            font-style: italic;
        }
        .controls {
            background: #FFF8F8;
            padding: 20px;
            border-bottom: 3px solid #7EC850;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .language-navigation {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        .btn-lang {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #7EC850, #3FA34D);
            color: white;
        }
        .btn-lang.active {
            border: 2px solid #FFD700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        .btn-lang:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }
        .control-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
            color: white;
        }
        .btn-play {
            background: linear-gradient(135deg, #EA4335, #D93025);
        }
        .btn-continue {
            background: linear-gradient(135deg, #34A853, #0F9D58);
        }
        .btn-stop {
            background: linear-gradient(135deg, #F9AB00, #FBBC05);
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .content {
            padding: 30px;
            font-size: 1.1em;
            line-height: 1.8;
        }
        .book-title {
            color: #5B8C5A;
            font-size: 2em;
            margin-bottom: 10px;
            text-align: center;
            border-bottom: 2px solid #7EC850;
            padding-bottom: 10px;
        }
        .chapter-title {
            color: #3F6B3F;
            font-size: 1.5em;
            margin: 25px 0 15px;
            text-align: center;
            font-style: italic;
        }
        .text-content {
            text-align: justify;
            margin-bottom: 30px;
        }
        .word {
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 1px 2px;
            border-radius: 3px;
        }
        .word:hover {
            background-color: #E7F9E7;
        }
        .word-highlight {
            background-color: #4169E1;
            color: white;
            padding: 2px 4px;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(65, 105, 225, 0.3);
        }
        .hidden {
            display: none;
        }
        @media (max-width: 600px) {
            .control-buttons {
                gap: 10px;
            }
            .btn {
                min-width: 100px;
                font-size: 0.9em;
                padding: 10px 16px;
            }
            .content {
                padding: 20px;
                font-size: 1em;
            }
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="book-cover">
                <img src="verborgener-wald.jpg" alt="Der verborgene Wald ‚Äì Cover" />
            </div>
            <h1>Der verborgene Wald</h1>
            <p>Vorlesen und Mitlesen leicht gemacht ‚Äì tauchen Sie ein in ein magisches Abenteuer</p>
        </div>
        <div class="controls">
            <div class="language-navigation">
                <button class="btn-lang active" onclick="switchLanguage('de', event)">üá©üá™ Deutsch</button>
                <button class="btn-lang" onclick="switchLanguage('en', event)">üá¨üáß English</button>
            </div>
            <div class="control-buttons">
                <button class="btn btn-play" id="btn-play" onclick="startReading()">üî¥ Vorlesen</button>
                <button class="btn btn-continue" id="btn-continue" onclick="continueReading()">‚ñ∂Ô∏è Weiterlesen</button>
                <button class="btn btn-stop" id="btn-stop" onclick="stopReading()">‚èπÔ∏è Stop</button>
            </div>
        </div>
        <div class="content">
            <div class="book-title">Der verborgene Wald</div>
            <div class="chapter-title">Kapitel 1: Die geheimnisvolle Karte</div>
            <!-- Deutsche Fassung -->
            <div id="de-content" class="language-content">
                <div class="text-content" id="de-textContent">
                    <p>
                        Die Sonne neigte sich dem Horizont entgegen und tauchte den Himmel in ein sanftes Orange. Max und Lisa standen auf dem alten Marktplatz ihrer Stadt und schauten sich neugierig um. Der Platz war leer, die meisten Gesch√§fte hatten bereits geschlossen, und nur das entfernte Kichern der Kinder, die auf dem Heimweg waren, war zu h√∂ren. ‚ÄûGlaubst du, es ist wirklich der Verborgene Wald?", fragte Max aufgeregt. Er sprang von einem Bein auf das andere und klopfte sich mit der Hand auf die Tasche, in der er eine kleine Notiz versteckt hatte, die sie den ganzen Nachmittag √ºber verfolgt hatte. ‚ÄûVielleicht...", antwortete Lisa nachdenklich. Die Nachricht sprach von einem alten Mann, der sie zur geheimen Karte f√ºhren w√ºrde ‚Äì eine Karte, die zu einem versteckten Ort voller Magie und Abenteuer f√ºhrte. ‚ÄûSchau mal da!", rief Max pl√∂tzlich und zeigte auf einen schmalen, fast verborgenen Weg zwischen den H√§usern. Am Ende des Weges stand ein alter Mann in einem langen, grauen Umhang. Seine Augen leuchteten wie zwei funkelnde Sterne.
                    </p>
                    <p>
                        Der Mann bemerkte sie sofort und winkte mit einer einladenden Geste. ‚ÄûAh, du bist gekommen", sagte er mit einer Stimme, die sich wie das Fl√ºstern des Windes anh√∂rte. ‚ÄûIch habe gewusst, dass ihr es seid." ‚ÄûW-wir?", fragte Max √ºberrascht. ‚ÄûWie k√∂nnen Sie das wissen?" Der Mann l√§chelte geheimnisvoll. ‚ÄûIch kenne viele Dinge, die andere nicht wissen. Die Karte, die ihr sucht, wird euch den Weg zeigen, aber nur, wenn ihr mutig genug seid, ihn zu gehen." Er zog eine alte, zusammengerollte Karte aus seinem Mantel und √ºberreichte sie Max. Die Karte war mit seltsamen Symbolen und bunten, geheimen Markierungen verziert. Der Rand war mit goldenen Schn√∂rkeln geschm√ºckt, die in der D√§mmerung im Schein des Mondes schimmerten. Max √∂ffnete die Karte und hielt sie neugierig in der Hand. Es war, als ob die Karte lebendig wurde. Sie schien zu flimmern und zu pulsieren, als ob sie aufgeregt darauf wartete, dass er sie entdeckte. ‚ÄûWas bedeutet das?", fragte Lisa und deutete auf einen merkw√ºrdigen, leuchtenden Punkt in der Mitte der Karte.
                    </p>
                    <p>
                        ‚ÄûDer Verborgene Wald", erkl√§rte der Mann. ‚ÄûEr wartet auf euch. Wenn ihr ihm begegnet, werdet ihr ein Geheimnis erfahren, das schon viele Jahre verborgen ist. Doch nur die, die das Herz eines Abenteurers haben, k√∂nnen es finden." Max' Augen gl√§nzten vor Aufregung. ‚ÄûDas h√∂rt sich nach einem echten Abenteuer an!", rief er und dr√ºckte die Karte fest an sich. Lisa hingegen schaute sich die Karte und den alten Mann misstrauisch an. ‚ÄûAber was passiert, wenn wir nicht zur√ºckkommen?", fragte sie leise. Der Mann schaute sie mit einem wissenden Blick an. ‚ÄûIhr werdet zur√ºckkommen", sagte er sanft. ‚ÄûDoch nicht so, wie ihr gegangen seid. Ihr werdet st√§rker, weiser und vielleicht auch ein wenig anders sein. Aber das ist das Abenteuer." Der alte Mann nickte und verschwand dann im Schatten der Gasse, als ob er nie da gewesen w√§re. Max und Lisa standen einen Moment lang unschl√ºssig da, dann drehten sie sich gemeinsam in Richtung des Waldes. Die Karte in Max' H√§nden leuchtete schwach, als ob sie ihnen den Weg wies. Mit einem letzten Blick zur√ºck auf die Stadt traten Max, Lisa und Bruno in den geheimen Wald ein, und das Abenteuer begann.
                    </p>
                </div>
            </div>
            <!-- Englische Fassung -->
            <div id="en-content" class="language-content hidden">
                <div class="text-content" id="en-textContent">
                    <p>
                        The sun was setting towards the horizon, bathing the sky in a soft orange glow. Max and Lisa stood in the old market square of their town, looking around curiously. The square was empty, most shops had already closed, and only the distant giggling of children on their way home could be heard. "Do you think it's really the Hidden Forest?" Max asked excitedly. He hopped from one foot to the other, patting his pocket where he had hidden a small note that had been following them all afternoon. "Maybe..." Lisa answered thoughtfully. The message spoke of an old man who would lead them to the secret map ‚Äì a map that led to a hidden place full of magic and adventure. "Look over there!" Max suddenly called out, pointing to a narrow, almost hidden path between the houses. At the end of the path stood an old man in a long grey cloak. His eyes shone like two sparkling stars.
                    </p>
                    <p>
                        The man noticed them immediately and waved with an inviting gesture. "Ah, you have come," he said in a voice that sounded like the whisper of the wind. "I knew it was you." "U-us?" Max asked in surprise. "How can you know that?" The man smiled mysteriously. "I know many things that others do not know. The map you seek will show you the way, but only if you are brave enough to walk it." He pulled an old, rolled-up map from his cloak and handed it to Max. The map was decorated with strange symbols and colourful, secret markings. The edge was adorned with golden flourishes that shimmered in the moonlight in the twilight. Max opened the map and held it curiously in his hand. It was as if the map came alive. It seemed to flicker and pulsate, as if it was excitedly waiting for him to discover it. "What does this mean?" Lisa asked, pointing to a strange, glowing point in the centre of the map.
                    </p>
                    <p>
                        "The Hidden Forest," the man explained. "It is waiting for you. When you encounter it, you will learn a secret that has been hidden for many years. But only those who have the heart of an adventurer can find it." Max's eyes gleamed with excitement. "That sounds like a real adventure!" he exclaimed, clutching the map tightly to himself. Lisa, however, looked at the map and the old man suspiciously. "But what happens if we don't come back?" she asked quietly. The man looked at her with a knowing gaze. "You will return," he said gently. "But not as you left. You will be stronger, wiser and perhaps a little different. But that is the adventure." The old man nodded and then disappeared into the shadow of the alley, as if he had never been there. Max and Lisa stood undecided for a moment, then turned together towards the forest. The map in Max's hands glowed faintly, as if it was showing them the way. With one last look back at the town, Max, Lisa and Bruno entered the secret forest, and the adventure began.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <script>
        let currentSpeech = null;
        let currentLanguage = 'de';
        let currentWordIndex = 0;
        const allWords = { de: [], en: [] };
        let lastHighlightedWord = null;

        function initializeWords() {
            ['de', 'en'].forEach(lang => {
                allWords[lang] = [];
                const paragraphs = document.querySelectorAll(`#${lang}-textContent p`);
                let wordCounter = 0;
                paragraphs.forEach(paragraph => {
                    const text = paragraph.textContent.trim();
                    const splitWords = text.split(/\s+/).filter(w => w.length > 0);
                    let html = '';
                    splitWords.forEach(word => {
                        html += `<span class="word" data-index="${wordCounter}" onclick="startFromWord(${wordCounter})">${word}</span> `;
                        allWords[lang].push(word);
                        wordCounter++;
                    });
                    paragraph.innerHTML = html.trim();
                });
            });
        }

        function switchLanguage(lang, event) {
            stopReading();
            currentLanguage = lang;
            currentWordIndex = 0;
            document.querySelectorAll('.language-content').forEach(elem => elem.classList.add('hidden'));
            document.getElementById(`${lang}-content`).classList.remove('hidden');
            const labels = {
                de: { play: 'Vorlesen', cont: 'Weiterlesen', stop: 'Stop' },
                en: { play: 'Read', cont: 'Continue', stop: 'Stop' }
            };
            document.getElementById('btn-play').innerHTML = `üî¥ ${labels[lang].play}`;
            document.getElementById('btn-continue').innerHTML = `‚ñ∂Ô∏è ${labels[lang].cont}`;
            document.getElementById('btn-stop').innerHTML = `‚èπÔ∏è ${labels[lang].stop}`;
            document.querySelectorAll('.btn-lang').forEach(btn => btn.classList.remove('active'));
            if (event && event.target) {
                event.target.classList.add('active');
            }
            const topElem = document.querySelector(`#${lang}-content`);
            if (topElem) {
                topElem.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function highlightWord(index) {
            if (lastHighlightedWord) {
                lastHighlightedWord.classList.remove('word-highlight');
            }
            const element = document.querySelector(`#${currentLanguage}-content .word[data-index="${index}"]`);
            if (element) {
                element.classList.add('word-highlight');
                lastHighlightedWord = element;
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        function startReading() {
            currentWordIndex = 0;
            if (currentSpeech) {
                speechSynthesis.cancel();
            }
            continueReading();
        }

        function continueReading() {
            if (currentSpeech) {
                speechSynthesis.cancel();
            }
            const words = allWords[currentLanguage];
            if (words && words.length > currentWordIndex) {
                const remainingText = words.slice(currentWordIndex).join(' ');
                currentSpeech = new SpeechSynthesisUtterance(remainingText);
                currentSpeech.rate = 1.0;
                currentSpeech.lang = currentLanguage === 'de' ? 'de-DE' : 'en-US';
                let localIndex = currentWordIndex;
                currentSpeech.onboundary = function(event) {
                    if (event.name === 'word') {
                        highlightWord(localIndex);
                        localIndex++;
                        currentWordIndex = localIndex;
                    }
                };
                currentSpeech.onend = function() {
                    // am Ende nichts Besonderes
                };
                speechSynthesis.speak(currentSpeech);
            }
        }

        function startFromWord(index) {
            currentWordIndex = index;
            if (currentSpeech) {
                speechSynthesis.cancel();
            }
            continueReading();
        }

        function stopReading() {
            if (currentSpeech) {
                speechSynthesis.cancel();
                currentSpeech = null;
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            initializeWords();
            switchLanguage('de');
        });
    </script>
</body>
</html>
